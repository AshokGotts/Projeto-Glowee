<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>@ViewData["Title"] - Glowee</title>
    <link rel="icon" type="image/x-icon" href="~/images/branding/favicon.ico" />
    <link rel="stylesheet" href="~/lib/bootstrap/dist/css/bootstrap.min.css" />
    <link rel="stylesheet" href="~/Glowee.styles.css" asp-append-version="true" />
    
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" />
    
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=Poppins:wght@400;500;600;700&display=swap" rel="stylesheet" />
    
    <!-- Layout Expandido -->
    <link rel="stylesheet" href="~/css/layout-expanded.css" asp-append-version="true" />
    
    @await RenderSectionAsync("Styles", required: false)
</head>
<body>
    @{
        var role = Context.Session.GetString("Role");
        var nome = Context.Session.GetString("Nome");
    }
    
    <!-- Header -->
    <header class="header-nav">
        <div class="container-fluid">
            <div class="d-flex justify-content-between align-items-center py-3 section-content">
                <div class="d-flex align-items-center">
                    <img src="~/images/branding/favicon.ico" alt="Glowee" class="header-favicon me-2" />
                    <div class="navbar-links ms-3 d-none d-md-flex">
                        @if (!string.IsNullOrEmpty(role) && role == "Cliente")
                        {
                            <!-- Navbar para Cliente: apenas Tela Inicial e Ver Produtos -->
                            @if (!(ViewContext.RouteData.Values["Controller"]?.ToString() == "Home" && ViewContext.RouteData.Values["Action"]?.ToString() == "Index"))
                            {
                                <a asp-controller="Home" asp-action="Index" class="navbar-link">
                                    <i class="fas fa-home me-2"></i>Tela Inicial
                                </a>
                            }
                            <a asp-controller="Produto" asp-action="Index" class="navbar-link">
                                <i class="fas fa-box me-2"></i>Ver Produtos
                            </a>
                        }
                        else if (!string.IsNullOrEmpty(role) && role == "Vendedor")
                        {
                            <!-- Navbar para Vendedor: todas as opções -->
                            @if (!(ViewContext.RouteData.Values["Controller"]?.ToString() == "Home" && ViewContext.RouteData.Values["Action"]?.ToString() == "Index"))
                            {
                                <a asp-controller="Home" asp-action="Index" class="navbar-link">
                                    <i class="fas fa-home me-2"></i>Tela Inicial
                                </a>
                            }
                            <a asp-controller="Produto" asp-action="Index" class="navbar-link">
                                <i class="fas fa-box me-2"></i>Ver Produtos
                            </a>
                            <a asp-controller="Venda" asp-action="MinhasVendas" class="navbar-link">
                                <i class="fas fa-chart-line me-2"></i>Vendas
                            </a>
                            <a asp-controller="Vendedor" asp-action="Index" class="navbar-link">
                                <i class="fas fa-users me-2"></i>Gerenciar Vendedores
                            </a>
                        }
                        else
                        {
                            <!-- Navbar para usuário não logado: Tela Inicial e Ver Produtos -->
                            @if (!(ViewContext.RouteData.Values["Controller"]?.ToString() == "Home" && ViewContext.RouteData.Values["Action"]?.ToString() == "Index"))
                            {
                                <a asp-controller="Home" asp-action="Index" class="navbar-link">
                                    <i class="fas fa-home me-2"></i>Tela Inicial
                                </a>
                            }
                            <a asp-controller="Produto" asp-action="Index" class="navbar-link">
                                <i class="fas fa-box me-2"></i>Ver Produtos
                            </a>
                        }
                    </div>
                </div>


                <!-- Desktop: Botões Login e Cadastro -->
                <div class="desktop-auth-buttons d-none d-md-flex align-items-center gap-3">
                    @if (string.IsNullOrEmpty(role))
                    {
                        <!-- Usuário não logado: Login e Cadastro -->
                        <a asp-controller="Account" asp-action="Login" class="btn btn-outline-primary">Login</a>
                        <a asp-controller="Account" asp-action="Register" class="btn btn-primary">Cadastro</a>
                    }
                    else if (role == "Cliente")
                    {
                        <!-- Cliente logado: Saudação e botão Sair -->
                        <span class="navbar-link text-primary fw-medium">
                            <i class="fas fa-user me-2"></i>Olá, @nome!
                        </span>
                        <a asp-controller="Account" asp-action="Logout" class="btn btn-outline-primary">
                            <i class="fas fa-sign-out-alt me-1"></i>Sair
                        </a>
                    }
                    else if (role == "Vendedor")
                    {
                        <!-- Vendedor logado: Saudação, Cadastrar Produto e Sair -->
                        <span class="navbar-link text-primary fw-medium">
                            <i class="fas fa-user me-2"></i>Olá, @nome!
                        </span>
                        <a asp-controller="Produto" asp-action="Create" class="btn btn-outline-secondary">
                            <i class="fas fa-plus me-1"></i>Cadastrar Produto
                        </a>
                        <a asp-controller="Account" asp-action="Logout" class="btn btn-outline-primary">
                            <i class="fas fa-sign-out-alt me-1"></i>Sair
                        </a>
                    }
                </div>

                <!-- Mobile: Menu Hambúrguer -->
                <div class="mobile-menu d-md-none">
                    <button class="menu-toggle" id="menuToggle" aria-label="Menu">
                        <i class="fas fa-bars fa-lg"></i>
                    </button>

                    <!-- Menu Dropdown Mobile -->
                    <div class="mobile-menu-dropdown" id="mobileMenuDropdown">
                        <div class="mobile-menu-content">
                            @if (!string.IsNullOrEmpty(role) && role == "Cliente")
                            {
                                <!-- Menu Mobile para Cliente: apenas Tela Inicial e Produtos -->
                                @if (!(ViewContext.RouteData.Values["Controller"]?.ToString() == "Home" && ViewContext.RouteData.Values["Action"]?.ToString() == "Index"))
                                {
                                    <a asp-controller="Home" asp-action="Index" class="mobile-menu-link">Tela Inicial</a>
                                }
                                <a asp-controller="Produto" asp-action="Index" class="mobile-menu-link">Produtos</a>
                                <div class="mobile-menu-divider"></div>
                                <div class="mobile-menu-user-info">
                                    <span class="mobile-menu-user-name">
                                        <i class="fas fa-user me-2"></i>Olá, @nome!
                                    </span>
                                </div>
                                <a asp-controller="Account" asp-action="Logout" class="mobile-menu-link">
                                    <i class="fas fa-sign-out-alt me-2"></i>Sair
                                </a>
                            }
                            else if (!string.IsNullOrEmpty(role) && role == "Vendedor")
                            {
                                <!-- Menu Mobile para Vendedor: todas as opções -->
                                @if (!(ViewContext.RouteData.Values["Controller"]?.ToString() == "Home" && ViewContext.RouteData.Values["Action"]?.ToString() == "Index"))
                                {
                                    <a asp-controller="Home" asp-action="Index" class="mobile-menu-link">Tela Inicial</a>
                                }
                                <a asp-controller="Produto" asp-action="Index" class="mobile-menu-link">Produtos</a>
                                <a asp-controller="Venda" asp-action="MinhasVendas" class="mobile-menu-link">Vendas</a>
                                <a asp-controller="Vendedor" asp-action="Index" class="mobile-menu-link">Gerenciar Vendedores</a>
                                <div class="mobile-menu-divider"></div>
                                <div class="mobile-menu-user-info">
                                    <span class="mobile-menu-user-name">
                                        <i class="fas fa-user me-2"></i>Olá, @nome!
                                    </span>
                                </div>
                                <a asp-controller="Produto" asp-action="Create" class="mobile-menu-link">Cadastrar Produto</a>
                                <a asp-controller="Account" asp-action="Logout" class="mobile-menu-link">
                                    <i class="fas fa-sign-out-alt me-2"></i>Sair
                                </a>
                            }
                            else
                            {
                                <!-- Menu Mobile para usuário não logado -->
                                @if (!(ViewContext.RouteData.Values["Controller"]?.ToString() == "Home" && ViewContext.RouteData.Values["Action"]?.ToString() == "Index"))
                                {
                                    <a asp-controller="Home" asp-action="Index" class="mobile-menu-link">Tela Inicial</a>
                                }
                                <a asp-controller="Produto" asp-action="Index" class="mobile-menu-link">Produtos</a>
                                <div class="mobile-menu-divider"></div>
                                <a asp-controller="Account" asp-action="Login" class="mobile-menu-link">Login</a>
                                <a asp-controller="Account" asp-action="Register" class="mobile-menu-link">Cadastro</a>
                            }
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </header>

    <main role="main" class="pb-3">
        @RenderBody()
    </main>

    <!-- Footer -->
    <footer class="footer-section">
        <div class="container-fluid">
            <div class="footer-content section-content">
                <div class="footer-links">
                    <a asp-controller="Home" asp-action="Privacy" class="footer-link">Privacidade</a>
                    <a href="#" class="footer-link">Sobre nós</a>
                    <a href="#" class="footer-link">Contato</a>
                </div>

                <div class="footer-social">
                    <a href="#" class="social-link" title="Instagram">
                        <i class="fab fa-instagram"></i>
                    </a>
                    <a href="#" class="social-link" title="Facebook">
                        <i class="fab fa-facebook"></i>
                    </a>
                    <a href="#" class="social-link" title="Twitter">
                        <i class="fab fa-twitter"></i>
                    </a>
                    <a href="#" class="social-link" title="TikTok">
                        <i class="fab fa-tiktok"></i>
                    </a>
                </div>

                <div class="footer-copyright">
                    <p>&copy; 2025 - Glowee</p>
                </div>
            </div>
        </div>
    </footer>

    <script src="~/lib/jquery/dist/jquery.min.js"></script>
    <script src="~/lib/bootstrap/dist/js/bootstrap.bundle.min.js"></script>
    @await RenderSectionAsync("Scripts", required: false)
</body>
</html>
